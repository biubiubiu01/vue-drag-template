(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-82ccd80c"],{1037:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"drag-page"},[n("div",{staticClass:"drag-header"}),n("div",{staticClass:"drag-main"},[n("div",{staticClass:"drag-component",on:{dragstart:t.handleDragStart}},t._l(t.componentList,(function(e,i){return n("div",{key:i,staticClass:"drag-component-item",attrs:{draggable:"","data-index":i}},[n("el-icon",{staticClass:"icon",attrs:{name:"circle-plus-outline"}}),t._v(t._s(e.title)+" ")],1)})),0),n("div",{staticClass:"drag-canvas",attrs:{id:"dragCanvas"},on:{drop:t.handleDropEnd,dragover:t.handleDragOver}},[n("drag-grid",{attrs:{width:1600,height:860,needLine:!0}},t._l(t.drawList,(function(e){return n("drag-item",{key:e.id,attrs:{w:e.config.w,h:e.config.h,x:e.config.x,y:e.config.y},on:{"update:w":function(n){return t.$set(e.config,"w",n)},"update:h":function(n){return t.$set(e.config,"h",n)},"update:x":function(n){return t.$set(e.config,"x",n)},"update:y":function(n){return t.$set(e.config,"y",n)}}},[n(e.componentName,t._b({tag:"component"},"component",e.config,!1))],1)})),1)],1)])])},a=[],o=n("5530"),r=(n("e9c4"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"drag-gird",style:t.gridStyle},[t._t("default"),t.needLine?n("mark-line",t._b({},"mark-line",t.$attrs,!1)):t._e()],2)}),s=[],l=(n("a9e3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mark-line"},t._l(t.lines,(function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"line.show"}],key:e.type,class:["drag-line","drag-line-"+e.type],style:t.lineStyle(e)})})),0)}),u=[],c=(n("d3b7"),n("159b"),n("2b0e")),d=new c["default"],h={name:"MarkLine",props:{guideBackground:{type:String,default:"rgb(255, 0, 204)"},guideSize:{type:Number,default:1}},data:function(){return{lines:[{type:"xt",position:"",show:!1},{type:"xc",position:"",show:!1},{type:"xb",position:"",show:!1},{type:"yl",position:"",show:!1},{type:"yc",position:"",show:!1},{type:"yr",position:"",show:!1}],draging:!1}},computed:{lineStyle:function(){var t=this;return function(e){return{background:t.guideBackground,top:e.type.indexOf("y")?e.position+"px":"unset",left:e.type.indexOf("x")?e.position+"px":"unset",width:e.type.indexOf("x")?t.guideSize+"px":"100%",height:e.type.indexOf("y")?t.guideSize+"px":"100%"}}}},created:function(){},mounted:function(){var t=this;d.$on("moving",(function(e,n){t.lines.forEach((function(t){return t.show=!1})),t.draging=!0,e&&t.setMarkLine(e,n)})),d.$on("moved",(function(){t.lines.forEach((function(t){return t.show=!1})),t.draging=!1}))},methods:{setMarkLine:function(t,e){for(var n=0;n<this.lines.length;n++){var i=this.lines[n];if(i.type==t){i.show=!0,i.position=e;break}}}}},f=h,g=(n("9fb0"),n("2877")),p=Object(g["a"])(f,l,u,!1,null,"56345bbc",null),m=p.exports,b={components:{MarkLine:m},name:"DragGrid",props:{width:{type:Number,default:500},height:{type:Number,default:500},grid:{type:Boolean,default:!0},needLine:{type:Boolean,default:!0}},data:function(){return{}},computed:{gridStyle:function(){var t=this.width,e=this.height,n=this.grid;return{width:t+"px",height:e+"px",background:n?' url(\n              "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxkZWZzPjxwYXR0ZXJuIGlkPSJwYXR0ZXJuXzAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHg9IjIuODA4OTg4NzY0MDQ0OTQwNSIgeT0iMC4wNTYxNzk3NzUyODA4OTU2OCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIj48cGF0aCBkPSJNIDEwIDAgSDAgTTAgMCBWMCAxMCIgc3Ryb2tlPSIjRTdFOEVBIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PHBhdHRlcm4gaWQ9InBhdHRlcm5fMSIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeD0iNDIuODA4OTg4NzY0MDQ0OTQiIHk9IjAuMDU2MTc5Nzc1MjgwODk1NjgiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCI+PHBhdGggZD0iTSA1MCAwIEgwIE0wIDAgVjAgNTAiIHN0cm9rZT0iI0NCQ0VEMyIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI3BhdHRlcm5fMCkiLz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI3BhdHRlcm5fMSkiLz48L3N2Zz4="\n            )':""}}},created:function(){},mounted:function(){},methods:{}},v=b,y=(n("3479"),Object(g["a"])(v,r,s,!1,null,"03b899aa",null)),x=y.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["vue-drag-resize",{active:t.active,"vue-drag-moving":t.draging,"vue-drag-resizing":t.resizing}],style:t.dragStyle,on:{mousedown:function(e){return e.stopPropagation(),e.preventDefault(),t.handleDragStart(e)}}},[t._t("default"),t.active&&t.isResizable?t._l(t.sticks,(function(e){return n("div",{key:e,class:["vue-drag-stick","vue-drag-stick-"+e],style:t.stickStyle(e),on:{mousedown:function(n){return n.stopPropagation(),n.preventDefault(),t.handleResizeStart(e,n)}}})})):t._e(),t.draging||t.resizing?n("div",{staticClass:"vue-drag-info"},[t.draging?n("span",[t._v("X："+t._s(t.boxStyle.left)+"，Y："+t._s(t.boxStyle.top))]):t._e(),t.resizing?n("span",[t._v("H："+t._s(t.boxStyle.height)+"，W："+t._s(t.boxStyle.width))]):t._e()]):t._e()],2)},S=[],k=n("1da1"),I=(n("96cf"),n("caad"),n("2532"),{x:{l:"left",m:"marginLeft",r:"right"},y:{t:"top",m:"marginTop",b:"bottom"}}),M={name:"DragItem",props:{w:{type:Number,default:200},h:{type:Number,default:200},x:{type:Number,default:0},y:{type:Number,default:0},zIndex:{type:Number|String,default:10},sticks:{type:Array,default:function(){return["tl","tm","tr","ml","mr","bl","bm","br"]}},stickSize:{type:Number,default:8},isResizable:{type:Boolean,default:!0},isDraggable:{type:Boolean,default:!0},isActive:{type:Boolean,default:!1},minWidth:{type:Number,default:50},minHeight:{type:Number,default:50},snap:{type:Boolean,default:!0},snapNumber:{type:Number,default:1},isConflictCheck:{type:Boolean,default:!0},parentLimit:{type:Boolean,default:!0}},data:function(){return{draging:!1,resizing:!1,active:!1,boxStyle:{top:"",left:"",width:"",height:""},currentStick:null,beforeMove:{left:null,top:null,width:null,height:null,oldPageX:null,oldPageY:null}}},computed:{dragStyle:function(){var t=this.zIndex,e=this.boxStyle,n=e.top,i=e.left,a=e.width,o=e.height;return{left:i+"px",top:n+"px",zIndex:t,width:a+"px",height:o+"px"}},stickStyle:function(){var t=this.stickSize;return function(e){var n={width:t+"px",height:t+"px"};return n[I.y[e[0]]]=-t/2+"px",n[I.x[e[1]]]=-t/2+"px",n}},parenWidth:function(){return this.$parent.width},parentHeight:function(){return this.$parent.height}},created:function(){var t=this;document.addEventListener("mousedown",this.deactive),this.$once("hook:beforeDestory",(function(){document.removeEventListener("mousedown",t.deactive)}))},methods:{deactive:function(){this.active=!1},handleResizeStart:function(t,e){var n=this;e.stopPropagation(),this.currentStick=t;var i=e.pageX,a=e.pageY;this.resizing=!0,this.setBeforeMove({oldPageX:i,oldPageY:a}),document.onmousemove=function(t){return n.handleResizeMove(t)},document.onmouseup=Object(k["a"])(regeneratorRuntime.mark((function t(){var e,i,a,o,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(document.onmousemove=null,document.onmouseup=null,n.currentStick=null,e=n.beforeMove,i=e.left,a=e.top,o=e.width,r=e.height,s=!1,!n.isConflictCheck){t.next=9;break}return t.next=8,n.conflictCheck();case 8:s=t.sent;case 9:s&&(n.boxStyle.left=i,n.boxStyle.top=a,n.boxStyle.height=r,n.boxStyle.width=o),n.$emit("resized",n.boxStyle),n.beforeMove={left:null,top:null,width:null,height:null,oldPageX:null,oldPageY:null},n.resizing=!1;case 13:case"end":return t.stop()}}),t)})))},setBeforeMove:function(t){var e=this.boxStyle,n=e.left,i=e.top,a=e.height,r=e.width;this.beforeMove=Object(o["a"])({left:n,top:i,height:a,width:r},t)},handleResizeMove:function(t){var e=t.pageX,n=t.pageY,i=this.beforeMove,a=i.top,o=i.left,r=i.height,s=i.width,l=i.oldPageX,u=i.oldPageY,c=r,d=s,h=a,f=o;switch(this.currentStick){case"tl":h=n-u+a,f=e-l+o,c=u-n+r,d=l-e+s;break;case"tm":c=u-n+r,h=n-u+a;break;case"tr":h=n-u+a,c=u-n+r,d=e-l+s;break;case"ml":f=e-l+o,d=l-e+s;break;case"mr":d=e-l+s;break;case"bl":f=e-l+o,d=l-e+s,c=n-u+r;break;case"bm":c=n-u+r;break;case"br":c=n-u+r,d=e-l+s;break;default:break}d>=this.minWidth&&(this.boxStyle.left=f,this.boxStyle.width=d,this.$emit("update:w",this.boxStyle.width),this.$emit("update:x",this.boxStyle.left)),c>=this.minHeight&&(this.boxStyle.top=h,this.boxStyle.height=c,this.$emit("update:h",this.boxStyle.height),this.$emit("update:y",this.boxStyle.top)),this.$emit("resizing",{width:this.boxStyle.width,height:this.boxStyle.height,left:this.boxStyle.left,top:this.boxStyle.top})},handleDragStart:function(t){var e=this;if(this.active=!0,t.stopPropagation(),this.isDraggable){var n=t.pageX,i=t.pageY;this.setBeforeMove({oldPageX:n,oldPageY:i}),this.draging=!0,document.onmousemove=function(t){return e.handleDragMove(t)},document.onmouseup=Object(k["a"])(regeneratorRuntime.mark((function t(){var n,i,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(document.onmousemove=null,document.onmouseup=null,d.$emit("moved"),n=e.beforeMove,i=n.left,a=n.top,o=!1,!e.isConflictCheck){t.next=9;break}return t.next=8,e.conflictCheck();case 8:o=t.sent;case 9:o&&(e.boxStyle.left=i,e.boxStyle.top=a),e.$emit("draged",{left:e.boxStyle.left,top:e.boxStyle.top}),e.beforeMove={left:null,top:null,width:null,height:null,oldPageX:null,oldPageY:null},e.draging=!1;case 13:case"end":return t.stop()}}),t)})))}},handleDragMove:function(t){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function n(){var i,a,o,r,s,l,u,c,d,h;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t.pageX,a=t.pageY,o=e.beforeMove,r=o.top,s=o.left,l=o.oldPageX,u=o.oldPageY,c=0,d=0,e.snap&&e.snapNumber>0?(c=Math.round((a-u)/e.snapNumber)*e.snapNumber+r,d=Math.round((i-l)/e.snapNumber)*e.snapNumber+s):(c=a-u+r,d=i-l+s),h={left:d,top:c},!e.snap){n.next=9;break}return n.next=8,e.snapCheck({left:d,top:c,width:e.beforeMove.width,height:e.beforeMove.height});case 8:h=n.sent;case 9:Object.assign(e.boxStyle,h),e.$emit("update:x",h.left),e.$emit("update:y",h.top),e.$emit("draging",h);case 13:case"end":return n.stop()}}),n)})))()},conflictCheck:function(){var t=this;return new Promise((function(e){var n=t.$el.parentNode.childNodes,i=t.boxStyle,a=i.top,o=i.left,r=i.width,s=i.height;t.parentLimit&&(a<0||o<0||a+s>t.parentHeight||o+r>t.parenWidth)&&e(!0);for(var l=0;l<n.length-1;l++){var u=n[l];if(!u.className.includes("vue-drag-moving")&&!u.className.includes("vue-drag-resizing")){var c=u.style;o+r>parseFloat(c.left)&&parseFloat(c.left)+parseFloat(c.width)>o&&a+s>parseFloat(c.top)&&parseFloat(c.top)+parseFloat(c.height)>a&&e(!0)}}e(!1)}))},snapCheck:function(t){var e=this,n=t.width,i=t.height,a=t.left,o=t.top,r=this.snapNumber+15;return new Promise((function(t){for(var s=e.$el.parentNode.childNodes,l=0;l<s.length-1;l++){var u=s[l];if(!u.className.includes("vue-drag-moving")){var c=u.style,h=parseFloat(c.width),f=parseFloat(c.height),g=parseFloat(c.left),p=parseFloat(c.top),m=Math.abs(g-a)<r,b=Math.abs(g+h-a-n)<r,v=Math.abs(h+g-a)<r,y=Math.abs(g-a-n)<r,x=Math.abs(g+h/2-a-n/2)<r,w=Math.abs(p-o)<r,S=Math.abs(p-o-i)<r,k=Math.abs(p+f-o-i)<r,I=Math.abs(p+f-o)<r,M=Math.abs(p+f/2-o-i/2)<r;m||b||v||y||x||w||S||k||I?(m&&(a=g,d.$emit("moving","yl",a)),b&&(a=g+h-n,d.$emit("moving","yr",g+h)),v&&(a=h+g,d.$emit("moving","yl",a)),y&&(a=g-n,d.$emit("moving","yr",g)),x&&(a=g+h/2-n/2,d.$emit("moving","yc",g+h/2)),w&&(o=p,d.$emit("moving","xt",o)),S&&(o=p-i,d.$emit("moving","xt",p)),k&&(o=p+f-i,d.$emit("moving","xt",p+f)),I&&(o=p+f,d.$emit("moving","xt",o)),M&&(o=p+f/2-i/2,d.$emit("moving","xc",p+f/2))):d.$emit("moving")}}t({left:a,top:o,width:n,height:i})}))}},watch:{active:function(t){this.$emit(t?"activated":"deactivated")},isActive:{handler:function(t){this.active=t},immediate:!0},x:{handler:function(t){this.boxStyle.left=t},immediate:!0},y:{handler:function(t){this.boxStyle.top=t},immediate:!0},h:{handler:function(t){this.boxStyle.height=t},immediate:!0},w:{handler:function(t){this.boxStyle.width=t},immediate:!0}}},N=M,z=(n("9b07"),Object(g["a"])(N,w,S,!1,null,"7d7bd4a8",null)),C=z.exports,D=n("e6d6"),P=n("fd91"),$={components:{DragGrid:x,DragItem:C,DragBox:D["a"],dragCircle:P["a"]},data:function(){return{componentList:[{title:"矩形盒子",componentName:"dragBox",id:"",config:{w:150,h:150,x:"",y:"",value:""}},{title:"圆形盒子",componentName:"dragCircle",id:"",config:{w:150,h:150,x:"",y:"",value:""}}],drawList:[],currentIndex:null}},computed:{getStyle:function(){return function(t){return{width:t.w+"px",height:t.h+"px",left:t.x+"px",top:t.y+"px",position:"absolute"}}}},created:function(){},mounted:function(){},methods:{handleDragStart:function(t){this.currentIndex=t.target.dataset.index},handleDropEnd:function(t){t.preventDefault(),t.stopPropagation(),t.dataTransfer.clearData();var e=this.currentIndex,n=document.getElementById("dragCanvas").getBoundingClientRect();if(e||0===e){var i=JSON.parse(JSON.stringify(this.componentList[e]));i.config.y=t.clientY-n.y,i.config.x=t.clientX-n.x,i.id="box_"+(new Date).getTime(),this.drawList.push(Object(o["a"])({},i))}},handleDragOver:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy"}}},B=$,O=(n("ab3f"),Object(g["a"])(B,i,a,!1,null,"5b85a402",null));e["default"]=O.exports},1181:function(t,e,n){},"15af":function(t,e,n){},3479:function(t,e,n){"use strict";n("1181")},"61f1":function(t,e,n){},"9b07":function(t,e,n){"use strict";n("a41b")},"9fb0":function(t,e,n){"use strict";n("61f1")},a41b:function(t,e,n){},ab3f:function(t,e,n){"use strict";n("15af")},af51:function(t,e,n){},dbd3:function(t,e,n){"use strict";n("f587")},e6d6:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"drag-box"})},a=[],o={components:{},data:function(){return{}},created:function(){},mounted:function(){},methods:{}},r=o,s=(n("f929"),n("2877")),l=Object(s["a"])(r,i,a,!1,null,"42ad1296",null);e["a"]=l.exports},f587:function(t,e,n){},f929:function(t,e,n){"use strict";n("af51")},fd91:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"drag-circle"})},a=[],o={components:{},data:function(){return{}},created:function(){},mounted:function(){},methods:{}},r=o,s=(n("dbd3"),n("2877")),l=Object(s["a"])(r,i,a,!1,null,"41124f99",null);e["a"]=l.exports}}]);